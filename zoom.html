<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Product Section â€“ No Black Bars</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <style>
        body {
            margin: 0;
            font-family: system-ui, sans-serif;
        }

        /* PRODUCT SECTION */
        .product-section {
            position: relative;
            width: 100%;
            overflow: hidden;
        }

        /* IMAGE */
        .product-section img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.6s ease;
            will-change: transform;
        }

        /* HOTSPOTS */
        .hotspot {
            position: absolute;
            width: 22px;
            height: 22px;
            background: #ff4d4d;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            cursor: pointer;
            z-index: 5;
            animation: pulse 1.6s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(255,77,77,.7); }
            70% { box-shadow: 0 0 0 16px rgba(255,77,77,0); }
            100% { box-shadow: 0 0 0 0 rgba(255,77,77,0); }
        }
    </style>
</head>

<body>

<section class="product-section" id="productSection">

    <img
            id="productImage"
            src="https://images.unsplash.com/photo-1587825140708-dfaf72ae4b04"
            alt="Product"
    >

    <!-- HOTSPOTS (relative to ORIGINAL image) -->
    <div class="hotspot" data-x="0.68" data-y="0.42"></div>
    <div class="hotspot" data-x="0.30" data-y="0.60"></div>
    <div class="hotspot" data-x="0.55" data-y="0.20"></div>

</section>

<script>
    const section = document.getElementById('productSection');
    const img = document.getElementById('productImage');
    const hotspots = section.querySelectorAll('.hotspot');

    let render = { w: 0, h: 0, x: 0, y: 0 };

    function setAspectRatio() {
        const ratio = img.naturalWidth / img.naturalHeight;
        section.style.aspectRatio = ratio;
    }

    function calculateImageRect() {
        const sw = section.clientWidth;
        const sh = section.clientHeight;
        const iw = img.naturalWidth;
        const ih = img.naturalHeight;

        const sectionRatio = sw / sh;
        const imgRatio = iw / ih;

        if (imgRatio > sectionRatio) {
            render.h = sh;
            render.w = sh * imgRatio;
            render.x = (sw - render.w) / 2;
            render.y = 0;
        } else {
            render.w = sw;
            render.h = sw / imgRatio;
            render.x = 0;
            render.y = (sh - render.h) / 2;
        }
    }

    function positionHotspots() {
        calculateImageRect();

        hotspots.forEach(hs => {
            const x = parseFloat(hs.dataset.x);
            const y = parseFloat(hs.dataset.y);

            hs.style.left = render.x + render.w * x + 'px';
            hs.style.top  = render.y + render.h * y + 'px';
        });
    }

    function zoomTo(x, y) {
        const originX = ((render.w * x + render.x) / section.clientWidth) * 100;
        const originY = ((render.h * y + render.y) / section.clientHeight) * 100;

        img.style.transformOrigin = `${originX}% ${originY}%`;
        img.style.transform = 'scale(2)';
    }

    function resetZoom() {
        img.style.transformOrigin = 'center';
        img.style.transform = 'scale(1)';
    }

    hotspots.forEach(hs => {
        const x = parseFloat(hs.dataset.x);
        const y = parseFloat(hs.dataset.y);

        hs.addEventListener('mouseenter', () => zoomTo(x, y));
        hs.addEventListener('mouseleave', resetZoom);
    });

    img.addEventListener('load', () => {
        setAspectRatio();      // ðŸ”’ section becomes the image
        positionHotspots();
    });

    window.addEventListener('resize', positionHotspots);
</script>

</body>
</html>
